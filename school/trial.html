<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>体験レッスン申し込み｜花城音楽教室</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Sawarabi+Gothic&family=M+PLUS+1p:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/style.css">
  <style>
    /* 必要追記のみ */
    .hidden { display: none !important; }
    .form-label-title {
      display: flex;
      align-items: center;
      font-family: "M PLUS 1p", sans-serif;
      font-size: 1.13rem;
      font-weight: 700;
      margin-bottom: .5rem;
      line-height: 1.1;
    }
    .form-label-bar {
      width: 5px;
      height: 1.6em;
      background: #bed3da;
      border-radius: 3px;
      margin-right: .6em;
    }
    .form-required, .form-optional {
      display: inline-block;
      background: #bed3da;
      color: #fff;
      font-size: .88em;
      font-weight: 500;
      border-radius: 1em;
      padding: .08em .85em .07em .85em;
      margin-left: .75em;
      letter-spacing: .04em;
    }
    .form-optional { font-weight: 500; }
    .checkbox-group, .radio-group {
      display: flex;
      flex-direction: column;
      gap: 0.35em 0;
      margin-bottom: .7em;
    }
    .weekday-label {
      font-weight: 600;
      font-size: 1em;
      margin-bottom: .3em;
    }
    .weekday-block {
      margin-bottom: 1.6em;
    }
    .time-box {
      margin: .25em 0 1em 2em;
      padding: .7em 1.1em .6em;
      background: #f7fbfc;
      border-radius: 8px;
      border: 1px solid #e3ecf0;
      animation: fadeIn .25s;
    }
    @keyframes fadeIn { from{ opacity:0; transform: translateY(10px);} to{ opacity:1; transform:none;}}
    .contact-block label[for^="contact-"] {
      font-weight: bold;
      display: block;
      margin-bottom: .9em;
      margin-top: .5em;
    }
    .contact-block .form-group { margin-bottom: 1.2em;}
    .contact-note { font-size: .98em; color: #888; margin-top: .6em; line-height: 1.6;}
    .btn-cancel { margin-left: 1.3em; padding: .5em 2em; background: #bbb; color: #fff; border-radius: 2em; border: none; font-weight: 600; cursor:pointer;}
    /* モーダル */
    #confirm-modal {
      position: fixed; inset: 0; background: rgba(34,39,49,.28);
      z-index: 99999; display: flex; align-items: center; justify-content: center;
      font-family: "M PLUS 1p", sans-serif;
    }
    #confirm-modal.hidden { display: none; }
    .confirm-box {
      background: #fff; border-radius: 18px; max-width: 460px; width: 93vw; padding: 2.4em 2em;
      box-shadow: 0 2px 18px rgba(100,100,100,.13);
    }
    .confirm-box h3 { font-size: 1.27em; font-weight: 700; margin-bottom: 1.3em;}
    .confirm-box button { margin-top: 1.2em;}
    /* ハンバーガー/ナビ調整 */
    .menu-toggle { /* ...既存通り省略... */ }
    .section-nav a:first-child {
      font-weight: 700;
      background: #a5bac4;
      color: #333;
    }
    .section-nav a { /* ...既存通り省略... */ }
  </style>
</head>
<body>
  <div class="wrapper">

    <!-- ハンバーガー＆ナビ -->
    <button class="menu-toggle" aria-label="メニューを開く">
      <span></span><span></span><span></span>
    </button>
    <nav class="section-nav">
      <a href="../index.html#top">トップ</a>
      <a href="../index.html#course-overview">コース概要</a>
      <a href="../index.html#fee">レッスン料金</a>
      <a href="../index.html#access">アクセス</a>
      <a href="../index.html#teacher">講師紹介</a>
      <a href="../index.html#trial">体験レッスン申込</a>
    </nav>

    <main>
      <section id="trial-form" class="section">
        <h2>体験レッスン申し込みフォーム</h2>
        <form action="/trial-confirm.html" method="post" class="trial-form" autocomplete="on" novalidate>
          <!-- お名前 -->
          <div class="form-block">
            <div class="form-label-title">
              <span class="form-label-bar"></span>お名前 <span class="form-required">必須</span>
            </div>
            <div class="form-group">
              <label for="lastname">姓</label>
              <input type="text" id="lastname" name="lastname" required>
            </div>
            <div class="form-group">
              <label for="firstname">名</label>
              <input type="text" id="firstname" name="firstname" required>
            </div>
          </div>
          <!-- ふりがな -->
          <div class="form-block">
            <div class="form-label-title">
              <span class="form-label-bar"></span>ふりがな <span class="form-required">必須</span>
            </div>
            <div class="form-group">
              <label for="furigana-last">せい</label>
              <input type="text" id="furigana-last" name="furigana_last" required>
            </div>
            <div class="form-group">
              <label for="furigana-first">めい</label>
              <input type="text" id="furigana-first" name="furigana_first" required>
            </div>
          </div>
          <!-- 年齢 -->
          <div class="form-block">
            <div class="form-label-title">
              <span class="form-label-bar"></span>年齢 <span class="form-required">必須</span>
            </div>
            <div class="form-group">
              <select id="age" name="age" required>
                <option value="">選択してください</option>
                <option>〜9歳</option>
                <option>10〜19歳</option>
                <option>20〜29歳</option>
                <option>30〜39歳</option>
                <option>40〜49歳</option>
                <option>50〜59歳</option>
                <option>60歳〜</option>
              </select>
            </div>
          </div>
          <!-- 性別 -->
          <div class="form-block">
            <div class="form-label-title">
              <span class="form-label-bar"></span>性別 <span class="form-required">必須</span>
            </div>
            <div class="radio-group">
              <label><input type="radio" name="gender" value="男性" required> 男性</label>
              <label><input type="radio" name="gender" value="女性"> 女性</label>
              <label><input type="radio" name="gender" value="その他"> その他</label>
            </div>
          </div>
          <!-- 希望するコース -->
          <div class="form-block">
            <div class="form-label-title">
              <span class="form-label-bar"></span>希望するコース <span class="form-required">必須</span>
            </div>
            <div class="form-group">
              <select id="course" name="course" required>
                <option value="">選択してください</option>
                <option value="ピアノ">ピアノ</option>
                <option value="ピアノ弾き語り">ピアノ弾き語り</option>
                <option value="ボイストレーニング">ボイストレーニング</option>
              </select>
            </div>
          </div>
          <!-- コースごとの理由（分岐） -->
          <div id="reason-block-piano" class="form-block hidden">
            <div class="form-label-title"><span class="form-label-bar"></span>レッスンを希望する理由 <span class="form-required">必須</span></div>
            <div class="form-caption">※複数回答可</div>
            <div class="checkbox-group">
              <label><input type="checkbox" name="reason_piano" value="好きな曲を弾きたい"> 好きな曲を弾きたい</label>
              <label><input type="checkbox" name="reason_piano" value="楽譜が読めるようになりたい"> 楽譜が読めるようになりたい</label>
              <label><input type="checkbox" name="reason_piano" value="姿勢や指使いなど基礎から身につけたい"> 姿勢や指使いなど基礎から身につけたい</label>
              <label><input type="checkbox" name="reason_piano" value="趣味として気軽に楽しみたい"> 趣味として気軽に楽しみたい</label>
              <label><input type="checkbox" name="reason_piano" value="伴奏やコード弾きができるようになりたい"> 伴奏やコード弾きができるようになりたい</label>
              <label><input type="checkbox" name="reason_piano" value="作曲・アレンジに活かしたい"> 作曲・アレンジに活かしたい</label>
              <label><input type="checkbox" name="reason_piano" value="人前で演奏する目標に挑戦したい"> 人前で演奏する目標に挑戦したい</label>
              <label><input type="checkbox" name="reason_piano" value="スキルアップや音大受験を視野に学びたい"> スキルアップや音大受験を視野に学びたい</label>
              <label><input type="checkbox" name="reason_piano" value="お子さんの習い事・情操教育として"> お子さんの習い事・情操教育として</label>
              <label><input type="checkbox" name="reason_piano" value="その他" class="reason-etc-trigger" data-target="reason-piano-etc"> その他</label>
            </div>
            <div class="form-group hidden" id="reason-piano-etc-wrap">
              <label for="reason_piano_etc">その他理由 <span class="form-optional">任意</span></label>
              <textarea id="reason_piano_etc" name="reason_piano_etc"></textarea>
            </div>
          </div>
          <div id="reason-block-singplay" class="form-block hidden">
            <div class="form-label-title"><span class="form-label-bar"></span>レッスンを希望する理由 <span class="form-required">必須</span></div>
            <div class="form-caption">※複数回答可</div>
            <div class="checkbox-group">
              <label><input type="checkbox" name="reason_singplay" value="好きな曲を弾き語りしたい"> 好きな曲を弾き語りしたい</label>
              <label><input type="checkbox" name="reason_singplay" value="コードで弾けるようになりたい"> コードで弾けるようになりたい</label>
              <label><input type="checkbox" name="reason_singplay" value="趣味としてゆったり楽しみたい"> 趣味としてゆったり楽しみたい</label>
              <label><input type="checkbox" name="reason_singplay" value="自作の歌を弾き語りで表現したい"> 自作の歌を弾き語りで表現したい</label>
              <label><input type="checkbox" name="reason_singplay" value="ライブ・発表会に向けて準備したい"> ライブ・発表会に向けて準備したい</label>
              <label><input type="checkbox" name="reason_singplay" value="弾き語り動画をSNSに投稿したい"> 弾き語り動画をSNSに投稿したい</label>
              <label><input type="checkbox" name="reason_singplay" value="音楽活動に必要なスキルを身につけたい"> 音楽活動に必要なスキルを身につけたい</label>
              <label><input type="checkbox" name="reason_singplay" value="歌に合ったコードやアレンジを学びたい"> 歌に合ったコードやアレンジを学びたい</label>
              <label><input type="checkbox" name="reason_singplay" value="声の出し方や発声も一緒に学びたい"> 声の出し方や発声も一緒に学びたい</label>
              <label><input type="checkbox" name="reason_singplay" value="その他" class="reason-etc-trigger" data-target="reason-singplay-etc"> その他</label>
            </div>
            <div class="form-group hidden" id="reason-singplay-etc-wrap">
              <label for="reason_singplay_etc">その他理由 <span class="form-optional">任意</span></label>
              <textarea id="reason_singplay_etc" name="reason_singplay_etc"></textarea>
            </div>
          </div>
          <div id="reason-block-voice" class="form-block hidden">
            <div class="form-label-title"><span class="form-label-bar"></span>レッスンを希望する理由 <span class="form-required">必須</span></div>
            <div class="form-caption">※複数回答可</div>
            <div class="checkbox-group">
              <label><input type="checkbox" name="reason_voice" value="好きな歌を歌えるようになりたい"> 好きな歌を歌えるようになりたい</label>
              <label><input type="checkbox" name="reason_voice" value="音程を安定させたい"> 音程を安定させたい</label>
              <label><input type="checkbox" name="reason_voice" value="高い声を出せるようになりたい"> 高い声を出せるようになりたい</label>
              <label><input type="checkbox" name="reason_voice" value="喉が枯れない歌い方を知りたい"> 喉が枯れない歌い方を知りたい</label>
              <label><input type="checkbox" name="reason_voice" value="カラオケでもっと上手く歌いたい"> カラオケでもっと上手く歌いたい</label>
              <label><input type="checkbox" name="reason_voice" value="人前で歌う機会に向けて練習したい"> 人前で歌う機会に向けて練習したい</label>
              <label><input type="checkbox" name="reason_voice" value="滑舌や発音を良くしたい"> 滑舌や発音を良くしたい</label>
              <label><input type="checkbox" name="reason_voice" value="声が小さい・通らないのが悩み"> 声が小さい・通らないのが悩み</label>
              <label><input type="checkbox" name="reason_voice" value="その他" class="reason-etc-trigger" data-target="reason-voice-etc"> その他</label>
            </div>
            <div class="form-group hidden" id="reason-voice-etc-wrap">
              <label for="reason_voice_etc">その他理由 <span class="form-optional">任意</span></label>
              <textarea id="reason_voice_etc" name="reason_voice_etc"></textarea>
            </div>
          </div>
          <!-- レッスンを希望する曜日・時間帯→体験レッスン希望日時 -->
          <div class="form-block">
            <div class="form-label-title">
              <span class="form-label-bar"></span>
              体験レッスン希望日時 <span class="form-required">必須</span>
            </div>
            <div id="weekday-list">
              <!-- 各曜日・チェック・時間帯 -->
              <div class="weekday-block" data-weekday="月曜日">
                <label class="weekday-label"><input type="checkbox" name="weekday" value="月曜日"> 月曜日</label>
                <div class="time-box hidden"></div>
              </div>
              <div class="weekday-block" data-weekday="火曜日">
                <label class="weekday-label"><input type="checkbox" name="weekday" value="火曜日"> 火曜日</label>
                <div class="time-box hidden"></div>
              </div>
              <div class="weekday-block" data-weekday="水曜日">
                <label class="weekday-label"><input type="checkbox" name="weekday" value="水曜日"> 水曜日</label>
                <div class="time-box hidden"></div>
              </div>
              <div class="weekday-block" data-weekday="木曜日">
                <label class="weekday-label"><input type="checkbox" name="weekday" value="木曜日"> 木曜日</label>
                <div class="time-box hidden"></div>
              </div>
              <div class="weekday-block" data-weekday="金曜日">
                <label class="weekday-label"><input type="checkbox" name="weekday" value="金曜日"> 金曜日</label>
                <div class="time-box hidden"></div>
              </div>
              <div class="weekday-block" data-weekday="土曜日">
                <label class="weekday-label"><input type="checkbox" name="weekday" value="土曜日"> 土曜日</label>
                <div class="time-box hidden"></div>
              </div>
              <div class="weekday-block" data-weekday="日曜日">
                <label class="weekday-label"><input type="checkbox" name="weekday" value="日曜日"> 日曜日</label>
                <div class="time-box hidden"></div>
              </div>
            </div>
            <div class="form-group" style="margin-top: 1.2em;">
              <label for="free-request">要相談（自由記入） <span class="form-optional">任意</span></label>
              <textarea id="free-request" name="free_request"></textarea>
            </div>
          </div>
          <!-- ご希望の連絡方法 -->
          <div class="form-block">
            <div class="form-label-title">
              <span class="form-label-bar"></span>ご希望の連絡方法 <span class="form-required">必須</span>
            </div>
            <div class="radio-group" id="contact-method-group">
              <label><input type="radio" name="contact_method" value="電話" required> 電話</label>
              <label><input type="radio" name="contact_method" value="メール"> メール</label>
              <label><input type="radio" name="contact_method" value="LINE"> LINE</label>
              <label><input type="radio" name="contact_method" value="Instagram DM"> Instagram DM</label>
            </div>
            <!-- 電話 -->
            <div class="contact-block hidden" id="contact-phone">
              <div class="form-group">
                <label for="contact-phone-tel"><b>お電話番号</b> <span class="form-required">必須</span></label>
                <input type="tel" id="contact-phone-tel" name="contact_phone_tel" pattern="\d{10,11}">
              </div>
              <div class="form-group" style="margin-top: 1.2em;">
                <label style="font-weight:bold;">ご都合の良いお時間帯 <span class="form-optional">任意</span></label>
                <div class="checkbox-group">
                  <label><input type="checkbox" name="contact_phone_time" value="午前"> 午前（10:00～12:00）</label>
                  <label><input type="checkbox" name="contact_phone_time" value="午後"> 午後（13:00～16:00）</label>
                  <label><input type="checkbox" name="contact_phone_time" value="夕方"> 夕方（16:00～19:00）</label>
                  <label><input type="checkbox" name="contact_phone_time" value="夜間"> 夜間（19:00～21:00）</label>
                </div>
              </div>
              <div class="contact-note">
                体験レッスンお申し込み後、３日以内に代表・花城よりお電話いたします。<br>
                もし３日以上経ってもご連絡がない場合は、お申し込みが届いていない可能性がありますので、恐れ入りますが再度お申し込みください。
              </div>
            </div>
            <!-- メール -->
            <div class="contact-block hidden" id="contact-mail">
              <div class="form-group">
                <label for="contact-mail-address"><b>メールアドレス</b> <span class="form-required">必須</span></label>
                <input type="email" id="contact-mail-address" name="contact_mail_address">
              </div>
              <div class="contact-note">
                体験レッスンお申し込み後、３日以内に教室公式メール（hanashiro.music.school@gmail.com）よりご連絡いたします。<br>
                万が一届かない場合は、迷惑メールフォルダをご確認のうえ、再度お申し込みください。
              </div>
            </div>
            <!-- LINE -->
            <div class="contact-block hidden" id="contact-line">
              <div class="form-group">
                <label for="contact-line-name"><b>LINEアカウント名</b> <span class="form-required">必須</span></label>
                <input type="text" id="contact-line-name" name="contact_line_name">
              </div>
              <div class="contact-note">
                以下の公式LINEを【友だち追加】し、トークで「体験レッスン希望」とメッセージをお送りください。<br>
                その後、こちらからご連絡いたします。<br>
                ※教室側からお客様を一方的に追加できない仕組みのため、お手数ですが必ずご自身で友だち追加をお願いいたします。<br>
                <a href="https://line.me/R/ti/p/@857gvbrj" target="_blank"><img src="../assets/line.jpeg" alt="花城音楽教室 公式LINE" class="contact-img"></a>
              </div>
            </div>
            <!-- Instagram DM -->
            <div class="contact-block hidden" id="contact-insta">
              <div class="form-group">
                <label for="contact-insta-name"><b>Instagramアカウント名</b> <span class="form-required">必須</span></label>
                <input type="text" id="contact-insta-name" name="contact_insta_name">
              </div>
              <div class="contact-note">
                教室公式アカウント（@hanashiro_music_school）をフォローのうえ、DMで「体験レッスン希望」とご連絡ください。<br>
                ※非公開アカウントでもDMは送れますが、「メッセージリクエスト」として届くため、承認されないと見られない場合があります。<br>
                <a href="https://instagram.com/hanashiro_music_school" target="_blank"><img src="../assets/instagram.png" alt="花城音楽教室 Instagram" class="contact-img"></a>
              </div>
            </div>
          </div>
          <!-- 送信ボタン -->
          <div class="submit-group">
            <button type="button" class="btn-submit">送信内容の確認</button>
          </div>
        </form>
      </section>
    </main>

    <footer class="site-footer">
      <p>&copy; 2025 Hanashiro Music School. All rights reserved.</p>
    </footer>
  </div>

  <!-- モーダル確認画面 -->
  <div id="confirm-modal" class="hidden">
    <div class="confirm-box">
      <h3>この内容で送信しますか？</h3>
      <div id="confirm-contents"></div>
      <button type="button" id="confirm-send" class="btn-submit">この内容で送信</button>
      <button type="button" id="confirm-cancel" class="btn-cancel">修正する</button>
    </div>
  </div>

  <!-- JS:分岐/バリデーション -->
  <script>
  document.addEventListener("DOMContentLoaded", function(){
    // コース分岐
    const courseSelect = document.getElementById('course');
    const reasonBlocks = {
      "ピアノ": document.getElementById('reason-block-piano'),
      "ピアノ弾き語り": document.getElementById('reason-block-singplay'),
      "ボイストレーニング": document.getElementById('reason-block-voice')
    };
    function showReasonBlock() {
      Object.values(reasonBlocks).forEach(el => el.classList.add('hidden'));
      if (reasonBlocks[courseSelect.value]) {
        reasonBlocks[courseSelect.value].classList.remove('hidden');
      }
    }
    courseSelect.addEventListener('change', showReasonBlock);

    // 「その他」チェックで理由記入欄表示
    function handleReasonEtcTrigger(block, checkboxName, etcWrapId) {
      const cbs = block.querySelectorAll(`input[type="checkbox"][name="${checkboxName}"]`);
      const etcCb = Array.from(cbs).find(cb => cb.value === "その他");
      const etcWrap = document.getElementById(etcWrapId);
      function toggleEtc() {
        if (etcCb.checked) {
          etcWrap.classList.remove("hidden");
        } else {
          etcWrap.classList.add("hidden");
        }
      }
      cbs.forEach(cb => cb.addEventListener("change", toggleEtc));
      toggleEtc();
    }
    courseSelect.addEventListener('change', function(){
      setTimeout(()=>{
        handleReasonEtcTrigger(reasonBlocks["ピアノ"], "reason_piano", "reason-piano-etc-wrap");
        handleReasonEtcTrigger(reasonBlocks["ピアノ弾き語り"], "reason_singplay", "reason-singplay-etc-wrap");
        handleReasonEtcTrigger(reasonBlocks["ボイストレーニング"], "reason_voice", "reason-voice-etc-wrap");
      },30);
    });
    // 初期化
    handleReasonEtcTrigger(reasonBlocks["ピアノ"], "reason_piano", "reason-piano-etc-wrap");
    handleReasonEtcTrigger(reasonBlocks["ピアノ弾き語り"], "reason_singplay", "reason-singplay-etc-wrap");
    handleReasonEtcTrigger(reasonBlocks["ボイストレーニング"], "reason_voice", "reason-voice-etc-wrap");

    // 曜日→時間帯ブロック
    const weekdayList = document.getElementById("weekday-list");
    const dayTimeDefs = {
      "月曜日":   [["午前（10:00～12:00）", true], ["午後（13:00～16:00）", true], ["夕方（16:00～19:00）", true], ["夜間（19:00～21:00）", true]],
      "火曜日":   [["午前（10:00～12:00）", true], ["午後（13:00～16:00）", true], ["夕方（16:00～19:00）", true], ["夜間（19:00～21:00）", true]],
      "水曜日":   [["午前（10:00～12:00）", true], ["午後（13:00～16:00）", true], ["夕方（16:00～19:00）", true], ["夜間（19:00～21:00）", true]],
      "木曜日":   [["午前（10:00～12:00）", true], ["午後（13:00～16:00）", true], ["夕方（16:00～19:00）", false], ["夜間（19:00～21:00）", false]],
      "金曜日":   [["午前（10:00～12:00）", false], ["午後（13:00～16:00）", false], ["夕方（16:00～19:00）", true], ["夜間（19:00～21:00）", true]],
      "土曜日":   [["午前（9:00～12:00）", true], ["午後（13:00～16:00）", false], ["夕方（16:00～19:00）", false], ["夜間（19:00～21:00）", true]],
      "日曜日":   [["午前（10:00～12:00）", false], ["午後（13:00～16:00）", false], ["夕方（16:00～19:00）", false], ["夜間（19:00～21:00）", true]],
    };
    weekdayList.querySelectorAll(".weekday-block").forEach(block=>{
      const cb = block.querySelector('input[type="checkbox"][name="weekday"]');
      const tbox = block.querySelector('.time-box');
      const day = block.getAttribute("data-weekday");
      cb.addEventListener("change", function(){
        if(cb.checked){
          tbox.classList.remove("hidden");
          tbox.innerHTML = dayTimeDefs[day].map(([label, enabled]) =>
            enabled
              ? `<label><input type="checkbox" name="time_${day}" value="${label}">${label}</label>`
              : `<label style="color:#bbb; cursor:not-allowed; opacity:.7;">${label}</label>`
          ).join("");
        }else{
          tbox.classList.add("hidden");
          tbox.innerHTML = "";
        }
      });
    });

    // 連絡方法分岐
    const contactRadios = document.querySelectorAll('input[name="contact_method"]');
    const contactBlocks = {
      "電話": document.getElementById("contact-phone"),
      "メール": document.getElementById("contact-mail"),
      "LINE": document.getElementById("contact-line"),
      "Instagram DM": document.getElementById("contact-insta")
    };
    contactRadios.forEach(radio => {
      radio.addEventListener('change', function(){
        Object.values(contactBlocks).forEach(el=>{if(el)el.classList.add('hidden')});
        if(contactBlocks[this.value]){
          contactBlocks[this.value].classList.remove('hidden');
        }
      });
    });

    // 送信内容確認モーダル & バリデーション
    const form = document.querySelector('.trial-form');
    const confirmModal = document.getElementById('confirm-modal');
    const confirmContents = document.getElementById('confirm-contents');
    form.querySelector('.btn-submit').addEventListener('click', function(){
      if(!form.checkValidity()){
        form.reportValidity();
        return;
      }
      // サマリ表示
      let html = "";
      html += "<b>お名前：</b>" + form.lastname.value + " " + form.firstname.value + "<br>";
      html += "<b>ふりがな：</b>" + form.furigana_last.value + " " + form.furigana_first.value + "<br>";
      html += "<b>年齢：</b>" + form.age.value + "<br>";
      html += "<b>性別：</b>" + (form.gender.value || "") + "<br>";
      html += "<b>希望するコース：</b>" + form.course.value + "<br>";
      // 理由
      if(form.course.value === "ピアノ"){
        const cbs = form.querySelectorAll('input[name="reason_piano"]:checked');
        html += "<b>理由：</b>" + Array.from(cbs).map(el=>el.value).join("、");
        if(form.reason_piano_etc && form.reason_piano_etc.value) html += "／その他: " + form.reason_piano_etc.value;
        html += "<br>";
      }
      if(form.course.value === "ピアノ弾き語り"){
        const cbs = form.querySelectorAll('input[name="reason_singplay"]:checked');
        html += "<b>理由：</b>" + Array.from(cbs).map(el=>el.value).join("、");
        if(form.reason_singplay_etc && form.reason_singplay_etc.value) html += "／その他: " + form.reason_singplay_etc.value;
        html += "<br>";
      }
      if(form.course.value === "ボイストレーニング"){
        const cbs = form.querySelectorAll('input[name="reason_voice"]:checked');
        html += "<b>理由：</b>" + Array.from(cbs).map(el=>el.value).join("、");
        if(form.reason_voice_etc && form.reason_voice_etc.value) html += "／その他: " + form.reason_voice_etc.value;
        html += "<br>";
      }
      // 希望日時
      html += "<b>体験レッスン希望日時：</b><br>";
      weekdayList.querySelectorAll('.weekday-block').forEach(block=>{
        const daycb = block.querySelector('input[type="checkbox"][name="weekday"]');
        if(daycb.checked){
          html += "・" + daycb.value;
          const tbox = block.querySelector('.time-box');
          const tcb = tbox.querySelectorAll('input[type="checkbox"]:checked');
          if(tcb.length>0){
            html += "：";
            html += Array.from(tcb).map(el=>el.value).join("、");
          }
          html += "<br>";
        }
      });
      if(form.free_request.value){
        html += "<b>要相談：</b>" + form.free_request.value + "<br>";
      }
      // 連絡方法
      html += "<b>連絡方法：</b>" + (form.contact_method.value || "") + "<br>";
      if(form.contact_method.value==="電話"){
        html += "<b>電話番号：</b>" + form.contact_phone_tel.value + "<br>";
        const tcb = form.querySelectorAll('input[name="contact_phone_time"]:checked');
        if(tcb.length>0){
          html += "<b>お電話可能時間：</b>" + Array.from(tcb).map(el=>el.value).join("、") + "<br>";
        }
      }
      if(form.contact_method.value==="メール"){
        html += "<b>メールアドレス：</b>" + form.contact_mail_address.value + "<br>";
      }
      if(form.contact_method.value==="LINE"){
        html += "<b>LINEアカウント名：</b>" + form.contact_line_name.value + "<br>";
      }
      if(form.contact_method.value==="Instagram DM"){
        html += "<b>Instagramアカウント名：</b>" + form.contact_insta_name.value + "<br>";
      }
      confirmContents.innerHTML = html;
      confirmModal.classList.remove("hidden");
    });
    // モーダル送信/修正
    document.getElementById('confirm-cancel').onclick = ()=>confirmModal.classList.add('hidden');
    document.getElementById('confirm-send').onclick = ()=>form.submit();

    // ハンバーガー
    const btn   = document.querySelector('.menu-toggle');
    const nav   = document.querySelector('.section-nav');
    const links = nav.querySelectorAll('a');
    btn.addEventListener('click', () => {
      const open = nav.classList.toggle('open');
      btn.classList.toggle('open');
      document.body.style.overflow = open ? 'hidden' : '';
      btn.setAttribute('aria-label', open ? 'メニューを閉じる' : 'メニューを開く');
    });
    links.forEach(link =>
      link.addEventListener('click', () => {
        nav.classList.remove('open');
        btn.classList.remove('open');
        document.body.style.overflow = '';
        btn.setAttribute('aria-label', 'メニューを開く');
      })
    );
  });
  </script>
</body>
</html>